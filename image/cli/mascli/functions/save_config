#!/bin/bash

function load_config() {
  if [[ -e $HOME/.ibm-mas/cli.env ]]; then
    source $HOME/.ibm-mas/cli.env
  fi
}

function save_config() {
  if [[ ! -d $HOME/.ibm-mas ]]; then
    mkdir $HOME/.ibm-mas
  fi

  cat << EOF > $HOME/.ibm-mas/cli.env
export ARTIFACTORY_USERNAME=$ARTIFACTORY_USERNAME
export ARTIFACTORY_TOKEN=$ARTIFACTORY_TOKEN

export IBM_ENTITLEMENT_KEY=$IBM_ENTITLEMENT_KEY

export MAS_INSTANCE_ID=$MAS_INSTANCE_ID
export MAS_WORKSPACE_ID=$MAS_WORKSPACE_ID
export MAS_WORKSPACE_NAME="$MAS_WORKSPACE_NAME"
export MAS_ANNOTATIONS="$MAS_ANNOTATIONS"

export MAS_CATALOG_SELECTION=$MAS_CATALOG_SELECTION
export MAS_CHANNEL_SELECTION=$MAS_CHANNEL_SELECTION
export MAS_CHANNEL=$MAS_CHANNEL
export MAS_ICR_CP=$MAS_ICR_CP
export MAS_ICR_CPOPEN=$MAS_ICR_CPOPEN

export MAS_DOMAIN=$MAS_DOMAIN
export CLUSTER_ISSUER_SELECTION=$CLUSTER_ISSUER_SELECTION
export MAS_CLUSTER_ISSUER=$MAS_CLUSTER_ISSUER

export MAS_TRUST_DEFAULT_CAS=$MAS_TRUST_DEFAULT_CAS

# Additional Config Support
export LOCAL_MAS_CONFIG_DIR=$LOCAL_MAS_CONFIG_DIR

# DNS configuration
export DNS_PROVIDER_SELECTION=$DNS_PROVIDER_SELECTION
export CLOUDFLARE_EMAIL=$CLOUDFLARE_EMAIL
export CLOUDFLARE_APITOKEN=$CLOUDFLARE_APITOKEN
export CLOUDFLARE_ZONE=$CLOUDFLARE_ZONE
export CLOUDFLARE_SUBDOMAIN=$CLOUDFLARE_SUBDOMAIN
export CIS_EMAIL=$CIS_EMAIL
export CIS_APIKEY=$CIS_APIKEY
export CIS_CRN=$CIS_CRN
export CIS_SUBDOMAIN=$CIS_SUBDOMAIN

# Application configuration
export MAS_APP_CHANNEL_IOT=$MAS_APP_CHANNEL_IOT
export MAS_APP_CHANNEL_MONITOR=$MAS_APP_CHANNEL_MONITOR
export MAS_APP_CHANNEL_MANAGE=$MAS_APP_CHANNEL_MANAGE
export MAS_APP_CHANNEL_PREDICT=$MAS_APP_CHANNEL_PREDICT
export MAS_APP_CHANNEL_OPTIMIZER=$MAS_APP_CHANNEL_OPTIMIZER
export MAS_APP_PLAN_OPTIMIZER=$MAS_APP_PLAN_OPTIMIZER
export MAS_APP_CHANNEL_ASSIST=$MAS_APP_CHANNEL_ASSIST
export MAS_APP_CHANNEL_VISUALINSPECTION=$MAS_APP_CHANNEL_VISUALINSPECTION

# OpenShift Release
export OPENSHIFT_RELEASE=$OPENSHIFT_RELEASE
export OPENSHIFT_OPERATORS=$OPENSHIFT_OPERATORS

# SLS
export SLS_LICENSE_ID=$SLS_LICENSE_ID
export SLS_LICENSE_FILE_LOCAL=$SLS_LICENSE_FILE_LOCAL
export SLS_LICENSE_FILE=$SLS_LICENSE_FILE
export SLS_ICR_CP=$SLS_ICR_CP
export SLS_ICR_CPOPEN=$SLS_ICR_CPOPEN

# MongoDB
export MONGODB_NAMESPACE=$MONGODB_NAMESPACE

# UDS
export UDS_CONTACT_EMAIL=$UDS_CONTACT_EMAIL
export UDS_CONTACT_FIRSTNAME="$UDS_CONTACT_FIRSTNAME"
export UDS_CONTACT_LASTNAME="$UDS_CONTACT_LASTNAME"

# Air Gap
export REGISTRY_USERNAME=$REGISTRY_USERNAME
export REGISTRY_PASSWORD=$REGISTRY_PASSWORD

export REGISTRY_PUBLIC_HOST=$REGISTRY_PUBLIC_HOST
export REGISTRY_PUBLIC_PORT=$REGISTRY_PUBLIC_PORT
export REGISTRY_PRIVATE_HOST=$REGISTRY_PRIVATE_HOST
export REGISTRY_PRIVATE_PORT=$REGISTRY_PRIVATE_PORT
export REGISTRY_PRIVATE_CA_FILE=$REGISTRY_PRIVATE_CA_FILE

export REDHAT_CONNECT_USERNAME=$REDHAT_CONNECT_USERNAME
export REDHAT_CONNECT_PASSWORD=$REDHAT_CONNECT_PASSWORD

export CLI_IMAGE_DIGEST=$CLI_IMAGE_DIGEST

# Provisioning
export CLUSTER_NAME=$CLUSTER_NAME
export IBMCLOUD_APIKEY=$IBMCLOUD_APIKEY
export IBMCLOUD_RESOURCEGROUP=$IBMCLOUD_RESOURCEGROUP
export FYRE_USERNAME=$FYRE_USERNAME
export FYRE_APIKEY=$FYRE_APIKEY
export FYRE_PRODUCT_ID=$FYRE_PRODUCT_ID
export FYRE_CLUSTER_DESCRIPTION="$FYRE_CLUSTER_DESCRIPTION"
export FYRE_QUOTA_TYPE=$FYRE_QUOTA_TYPE
export FYRE_WORKER_COUNT=$FYRE_WORKER_COUNT
export FYRE_WORKER_CPU=$FYRE_WORKER_CPU
export FYRE_WORKER_MEMORY=$FYRE_WORKER_MEMORY

# Turbonomic
export TURBONOMIC_TARGET_NAME="$TURBONOMIC_TARGET_NAME"
export TURBONOMIC_SERVER_URL="$TURBONOMIC_SERVER_URL"
export TURBONOMIC_SERVER_VERSION="$TURBONOMIC_SERVER_VERSION"
export TURBONOMIC_USERNAME="$TURBONOMIC_USERNAME"
export TURBONOMIC_PASSWORD="$TURBONOMIC_PASSWORD"

# DB2
export DB2_NAMESPACE=$DB2_NAMESPACE
export DB2_ACTION_SYSTEM=$DB2_ACTION_SYSTEM
export DB2_ACTION_MANAGE=$DB2_ACTION_MANAGE

export DB2_SET_AFFINITY=$DB2_SET_AFFINITY
export DB2_AFFINITY_KEY=$DB2_AFFINITY_KEY
export DB2_AFFINITY_VALUE=$DB2_AFFINITY_VALUE

export DB2_SET_TOLERATIONS=$DB2_SET_TOLERATIONS
export DB2_TOLERATE_KEY=$DB2_TOLERATE_KEY
export DB2_TOLERATE_VALUE=$DB2_TOLERATE_VALUE
export DB2_TOLERATE_EFFECT=$DB2_TOLERATE_EFFECT

export DB2_CPU_REQUESTS=$DB2_CPU_REQUESTS
export DB2_CPU_LIMITS=$DB2_CPU_LIMITS
export DB2_MEMORY_REQUESTS=$DB2_MEMORY_REQUESTS
export DB2_MEMORY_LIMITS=$DB2_MEMORY_LIMITS

export DB2_META_STORAGE_SIZE=$DB2_META_STORAGE_SIZE
export DB2_DATA_STORAGE_SIZE=$DB2_DATA_STORAGE_SIZE
export DB2_BACKUP_STORAGE_SIZE=$DB2_BACKUP_STORAGE_SIZE
export DB2_LOGS_STORAGE_SIZE=$DB2_LOGS_STORAGE_SIZE
export DB2_TEMP_STORAGE_SIZE=$DB2_TEMP_STORAGE_SIZE

export MAS_APPWS_BINDINGS_JDBC_MANAGE=$MAS_APPWS_BINDINGS_JDBC_MANAGE
export MAS_APPWS_COMPONENTS=$MAS_APPWS_COMPONENTS
export MAS_APP_SETTINGS_DB2_SCHEMA=$MAS_APP_SETTINGS_DB2_SCHEMA
export MAS_APP_SETTINGS_TABLESPACE=$MAS_APP_SETTINGS_TABLESPACE
export MAS_APP_SETTINGS_INDEXSPACE=$MAS_APP_SETTINGS_INDEXSPACE

export MAS_APP_SETTINGS_CRYPTO_KEY=$MAS_APP_SETTINGS_CRYPTO_KEY
export MAS_APP_SETTINGS_CRYPTOX_KEY=$MAS_APP_SETTINGS_CRYPTOX_KEY
export MAS_APP_SETTINGS_OLD_CRYPTO_KEY=$MAS_APP_SETTINGS_OLD_CRYPTO_KEY
export MAS_APP_SETTINGS_OLD_CRYPTOX_KEY=$MAS_APP_SETTINGS_OLD_CRYPTOX_KEY
export MAS_APP_SETTINGS_OVERRIDE_ENCRYPTION_SECRETS_FLAG=$MAS_APP_SETTINGS_OVERRIDE_ENCRYPTION_SECRETS_FLAG

# Grafana
export CLUSTER_MONITORING_INCLUDE_GRAFANA=$CLUSTER_MONITORING_INCLUDE_GRAFANA
export GRAFANA_NAMESPACE=$GRAFANA_NAMESPACE

EOF
}
