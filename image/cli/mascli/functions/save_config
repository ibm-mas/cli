#!/bin/bash

function load_config() {
  if [[ -e $HOME/.ibm-mas/cli.env ]]; then
    source $HOME/.ibm-mas/cli.env
  fi
}

function save_config() {
  if [[ ! -d $HOME/.ibm-mas ]]; then
    mkdir $HOME/.ibm-mas
  fi

  cat << EOF > $HOME/.ibm-mas/cli.env
export ARTIFACTORY_USERNAME=$ARTIFACTORY_USERNAME
export ARTIFACTORY_APIKEY=$ARTIFACTORY_APIKEY

export IBM_ENTITLEMENT_KEY=$IBM_ENTITLEMENT_KEY

export MAS_INSTANCE_ID=$MAS_INSTANCE_ID
export MAS_WORKSPACE_ID=$MAS_WORKSPACE_ID
export MAS_WORKSPACE_NAME="$MAS_WORKSPACE_NAME"
export MAS_ANNOTATIONS="$MAS_ANNOTATIONS"

export MAS_CATALOG_SELECTION=$MAS_CATALOG_SELECTION
export MAS_CATALOG_SOURCE=$MAS_CATALOG_SOURCE
export MAS_CHANNEL_SELECTION=$MAS_CHANNEL_SELECTION
export MAS_CHANNEL=$MAS_CHANNEL
export MAS_ICR_CP=$MAS_ICR_CP
export MAS_ICR_CPOPEN=$MAS_ICR_CPOPEN
export MAS_ENTITLEMENT_USERNAME=$MAS_ENTITLEMENT_USERNAME
export MAS_ENTITLEMENT_KEY=$MAS_ENTITLEMENT_KEY

export MAS_DOMAIN=$MAS_DOMAIN
export CLUSTER_ISSUER_SELECTION=$CLUSTER_ISSUER_SELECTION
export MAS_CLUSTER_ISSUER=$MAS_CLUSTER_ISSUER

# Additional Config Support
export LOCAL_MAS_CONFIG_DIR=$LOCAL_MAS_CONFIG_DIR

# DNS configuration
export DNS_PROVIDER_SELECTION=$DNS_PROVIDER_SELECTION
export CLOUDFLARE_EMAIL=$CLOUDFLARE_EMAIL
export CLOUDFLARE_APITOKEN=$CLOUDFLARE_APITOKEN
export CLOUDFLARE_ZONE=$CLOUDFLARE_ZONE
export CLOUDFLARE_SUBDOMAIN=$CLOUDFLARE_SUBDOMAIN
export CIS_EMAIL=$CIS_EMAIL
export CIS_APIKEY=$CIS_APIKEY
export CIS_CRN=$CIS_CRN
export CIS_SUBDOMAIN=$CIS_SUBDOMAIN

# Application configuration
export MAS_APP_CHANNEL_IOT=$MAS_APP_CHANNEL_IOT
export MAS_APP_CHANNEL_MONITOR=$MAS_APP_CHANNEL_MONITOR
export MAS_APP_CHANNEL_MANAGE=$MAS_APP_CHANNEL_MANAGE
export MAS_APP_CHANNEL_PREDICT=$MAS_APP_CHANNEL_PREDICT
export MAS_APP_CHANNEL_OPTIMIZER=$MAS_APP_CHANNEL_OPTIMIZER
export MAS_APP_PLAN_OPTIMIZER=$MAS_APP_PLAN_OPTIMIZER
export MAS_APP_CHANNEL_HPUTILITIES=$MAS_APP_CHANNEL_HPUTILITIES
export MAS_APP_CHANNEL_ASSIST=$MAS_APP_CHANNEL_ASSIST
export MAS_APP_CHANNEL_VISUALINSPECTION=$MAS_APP_CHANNEL_VISUALINSPECTION

# OpenShift Release
export OPENSHIFT_RELEASE=$OPENSHIFT_RELEASE
export OPENSHIFT_OPERATORS=$OPENSHIFT_OPERATORS

# SLS
export SLS_LICENSE_ID=$SLS_LICENSE_ID
export SLS_LICENSE_FILE_LOCAL=$SLS_LICENSE_FILE_LOCAL
export SLS_LICENSE_FILE=$SLS_LICENSE_FILE
export SLS_ICR_CP=$SLS_ICR_CP
export SLS_ICR_CPOPEN=$SLS_ICR_CPOPEN
export SLS_ENTITLEMENT_USERNAME=$SLS_ENTITLEMENT_USERNAME
export SLS_ENTITLEMENT_KEY=$SLS_ENTITLEMENT_KEY

# UDS
export UDS_CONTACT_EMAIL=$UDS_CONTACT_EMAIL
export UDS_CONTACT_FIRSTNAME="$UDS_CONTACT_FIRSTNAME"
export UDS_CONTACT_LASTNAME="$UDS_CONTACT_LASTNAME"

# Air Gap
export REGISTRY_USERNAME=$REGISTRY_USERNAME
export REGISTRY_PASSWORD=$REGISTRY_PASSWORD

export REGISTRY_PUBLIC_HOST=$REGISTRY_PUBLIC_HOST
export REGISTRY_PUBLIC_PORT=$REGISTRY_PUBLIC_PORT
export REGISTRY_PRIVATE_HOST=$REGISTRY_PRIVATE_HOST
export REGISTRY_PRIVATE_PORT=$REGISTRY_PRIVATE_PORT
export REGISTRY_PRIVATE_CA_FILE=$REGISTRY_PRIVATE_CA_FILE

export REDHAT_CONNECT_USERNAME=$REDHAT_CONNECT_USERNAME
export REDHAT_CONNECT_PASSWORD=$REDHAT_CONNECT_PASSWORD

export CLI_IMAGE_DIGEST=$CLI_IMAGE_DIGEST

# Provisioning
export CLUSTER_NAME=$CLUSTER_NAME
export IBMCLOUD_APIKEY=$IBMCLOUD_APIKEY
export IBMCLOUD_RESOURCEGROUP=$IBMCLOUD_RESOURCEGROUP
export FYRE_USERNAME=$FYRE_USERNAME
export FYRE_APIKEY=$FYRE_APIKEY
export FYRE_PRODUCT_ID=$FYRE_PRODUCT_ID
export FYRE_CLUSTER_DESCRIPTION="$FYRE_CLUSTER_DESCRIPTION"
export FYRE_QUOTA_TYPE=$FYRE_QUOTA_TYPE
export FYRE_WORKER_COUNT=$FYRE_WORKER_COUNT
export FYRE_WORKER_CPU=$FYRE_WORKER_CPU
export FYRE_WORKER_MEMORY=$FYRE_WORKER_MEMORY

# DB2
export DB2_ACTION_SYSTEM=$DB2_ACTION_SYSTEM
export DB2_ACTION_MANAGE=$DB2_ACTION_MANAGE

export DB2_CPU_REQUESTS=$DB2_CPU_REQUESTS
export DB2_CPU_LIMITS=$DB2_CPU_LIMITS
export DB2_MEMORY_REQUESTS=$DB2_MEMORY_REQUESTS
export DB2_MEMORY_LIMITS=$DB2_MEMORY_LIMITS

export DB2_META_STORAGE_SIZE=$DB2_META_STORAGE_SIZE
export DB2_DATA_STORAGE_SIZE=$DB2_DATA_STORAGE_SIZE
export DB2_BACKUP_STORAGE_SIZE=$DB2_BACKUP_STORAGE_SIZE
export DB2_LOGS_STORAGE_SIZE=$DB2_LOGS_STORAGE_SIZE
export DB2_TEMP_STORAGE_SIZE=$DB2_TEMP_STORAGE_SIZE

export MAS_APPWS_BINDINGS_JDBC_MANAGE=$MAS_APPWS_BINDINGS_JDBC_MANAGE

# JDBC Configuration
export CONFIGURE_EXTERNAL_DB=$CONFIGURE_EXTERNAL_DB
export DB_INSTANCE_ID=$DB_INSTANCE_ID
export MAS_JDBC_USER=$MAS_JDBC_USER
export MAS_JDBC_PASSWORD=$MAS_JDBC_PASSWORD
export MAS_JDBC_URL=$MAS_JDBC_URL
export MAS_APP_SETTINGS_DB2_SCHEMA=$MAS_APP_SETTINGS_DB2_SCHEMA
export MAS_APP_SETTINGS_TABLESPACE=$MAS_APP_SETTINGS_TABLESPACE
export MAS_APP_SETTINGS_INDEXSPACE=$MAS_APP_SETTINGS_INDEXSPACE
export SSL_ENABLED=$SSL_ENABLED
export MAS_JDBC_CERT_LOCAL_FILE=$MAS_JDBC_CERT_LOCAL_FILE
export MAS_CONFIG_SCOPE=$MAS_CONFIG_SCOPE
export MAS_APPWS_BINDINGS_JDBC_MANAGE=$MAS_APPWS_BINDINGS_JDBC_MANAGE

EOF
}
