# IVT 6: Core x Predict
# -------------------------------------------------------------------------
- name: ivtcore-predict
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-predict
    - name: product_channel
      value: $(params.mas_app_channel_predict)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_predict)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-predict

- name: cv-predict
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-predict
    - name: product_channel
      value: $(params.mas_app_channel_predict)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_predict)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-predict


# IVT 7: Core x Visual Inspection
# -------------------------------------------------------------------------
- name: ivtcore-visualinspection
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-visualinspection
    - name: product_channel
      value: $(params.mas_app_channel_visualinspection)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_visualinspection)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-visualinspection

- name: cv-visualinspection
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-visualinspection
    - name: product_channel
      value: $(params.mas_app_channel_visualinspection)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_visualinspection)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-visualinspection
