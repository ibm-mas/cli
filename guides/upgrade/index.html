<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/cli/guides/upgrade/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Upgrade - MAS CLI</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Upgrade";
        var mkdocs_page_input_path = "guides/upgrade.md";
        var mkdocs_page_url = "/cli/guides/upgrade/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS CLI
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Guides</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../choosing-the-right-catalog/">Choosing the Right Catalog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../image-mirroring/">Image Mirroring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install/">Install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../update/">Update</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Upgrade</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#upgrade-overview">Upgrade Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#1-disconnected-upgrade-preparation">1 Disconnected Upgrade Preparation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-upgrade-maximo-application-suite">2 Upgrade Maximo Application Suite</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uninstall/">Uninstall</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">OpenShift Management</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/provision-fyre/">provision-fyre</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/provision-roks/">provision-roks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/provision-rosa/">provision-rosa</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/configure-airgap/">configure-airgap</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Image Mirroring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/setup-registry/">setup-registry</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/teardown-registry/">teardown-registry</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/mirror-images/">mirror-images</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/mirror-redhat-images/">mirror-redhat-images</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MAS Management</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/configtool-oidc/">configtool-oidc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/install/">install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/update/">update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/upgrade/">upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/uninstall/">uninstall</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Troubleshooting</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/must-gather/">must-gather</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Catalogs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../catalogs/">All Catalogs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../catalogs/v8-240326-amd64/">Mar 26 2024</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../catalogs/v8-240227-amd64/">Feb 27 2024</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../catalogs/v8-240130-amd64/">Jan 30 2024</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../catalogs/v8-231228-amd64/">Dec 28 2023</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/topology/">Topology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/cluster-extensions/">Cluster Extensions</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS CLI</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Guides</li>
      <li class="breadcrumb-item active">Upgrade</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ibm-mas/cli/blob/master/docs/guides/upgrade.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="upgrade">Upgrade<a class="headerlink" href="#upgrade" title="Permanent link"></a></h1>
<h2 id="upgrade-overview">Upgrade Overview<a class="headerlink" href="#upgrade-overview" title="Permanent link"></a></h2>
<p>Upgrade is the act of switching a MAS installation to a new subscription channel; it is distinct from an update, which is when new versions are delivered on existing subscription channels.  New features are always delivered via new subscription channels, update within a channel will only deliver updates to existing functionality (including security updates) and bug fixes.</p>
<ol>
<li><a href="#1-upgrade">Upgrade</a></li>
<li><a href="#1-disconnected-install-preparation">Disconnected Upgrade Preparation</a></li>
<li><a href="#2-update-maximo-application-suite">Update MAS</a></li>
</ol>
<p>When you choose to upgrade to pick up a feature release, the upgrade is targeted at a specific MAS instance in the cluster.  Upgrades must work within an n-1 range, ie. we support MAS 8.10 and 8.9 on a cluster, or 8.9 and 8.8, but not 8.8 and 8.10.</p>
<p>The process to undo an upgrade varies depending on what version and which applications were being upgraded, e.g. if there are database changes that need to be reversed it's more involved than if it's just a case of stateless runtime to be reverted to an older version.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You can only upgrade to a version of MAS already supported by the <code>ibm-maximo-operator-catalog</code> CatalogSource currently installed in the cluster.</p>
<ul>
<li>If you are using the static catalog and have not already updated to a catalog that includes the version of MAS you wish to upgrade to then you must first follow the <a href="../update/">update process</a>.</li>
<li>If you are using the dynamic catalog then no action is required here, the catalog source will automatically update to include new MAS releases.</li>
</ul>
</div>
<h2 id="1-disconnected-upgrade-preparation">1 Disconnected Upgrade Preparation<a class="headerlink" href="#1-disconnected-upgrade-preparation" title="Permanent link"></a></h2>
<p>Before you start the upgrade, you must mirror the images for the new catalog that you wish to update to. Mirroring the images is a simple but time consuming process.  Three modes are available for the mirror process:</p>
<ul>
<li><strong>direct</strong> mirrors images directly from the source registry to your private registry</li>
<li><strong>to-filesystem</strong> mirrors images from the source to a local directory</li>
<li><strong>from-filesystem</strong> mirrors images from a local directory to your private registry</li>
</ul>
<pre><code class="language-bash">docker run -ti --rm --pull always quay.io/ibmmas/cli mas mirror-images
</code></pre>
<p>You will be prompted to set the target registry for the image mirroring and to <a href="../choosing-the-right-catalog/">select the version of IBM Maximo Operator Catalog to mirror</a> and the subset of content that you wish to mirror.  You can choose to mirror everything from the catalog, or control exactly what is mirrored to your private registry to reduce the time and bandwidth used to mirror the images, as well reducing the storage requirements of the registry.</p>
<p>This command can also be ran non-interactive, for full details refer to the <a href="../../commands/mirror-images/">mirror-images</a> command documentation.</p>
<pre><code class="language-bash">mas mirror-images -m direct -d /mnt/local-mirror \
  -H myprivateregistry.com -P 5000 -u $REGISTRY_USERNAME -p $REGISTRY_PASSWORD \
  -c v8-240130-amd64 -C 8.11.x \
  --mirror-catalog --mirror-core --mirror-iot --mirror-manage \
  --mirror-cfs --mirror-uds --mirror-sls --mirror-tsm --mirror-mongo --mirror-db2 \
  --ibm-entitlement $IBM_ENTITLEMENT_KEY --redhat-username $REDHAT_USERNAME --redhat-password $REDHAT_PASSWORD \
  --no-confirm
</code></pre>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure to select the release of MAS you want to upgrade to, not the release of MAS you are currently on.  For example if you are upgrading from MAS 8.9 to MAS 8.10 you should set <code>-C 8.10.x</code>.</p>
</div>
<h2 id="2-upgrade-maximo-application-suite">2 Upgrade Maximo Application Suite<a class="headerlink" href="#2-upgrade-maximo-application-suite" title="Permanent link"></a></h2>
<p>Run <code>mas upgrade</code> and choose the MAS instance to upgrade.  The upgrade will automatically detect the installed release, and perform an upgrade to the next available release.</p>
<pre><code class="language-bash">docker run -ti --rm --pull always quay.io/ibmmas/cli mas upgrade
</code></pre>
<p>The command can also be ran non-interactive.</p>
<pre><code class="language-bash">mas upgrade -i inst1 --no-confirm
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/cli" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../update/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../uninstall/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
