# IVT 1: Core x HPUtilities
# -------------------------------------------------------------------------
- name: ivtcore-hputilities
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-hputilities
    - name: product_channel
      value: $(params.mas_app_channel_hputilities)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_hputilities)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-hputilities

- name: cv-hputilities
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-hputilities
    - name: product_channel
      value: $(params.mas_app_channel_hputilities)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_hputilities)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-hputilities


# IVT 2: Core x IoT
# -------------------------------------------------------------------------
- name: ivtcore-iot
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-iot
    - name: product_channel
      value: $(params.mas_app_channel_iot)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_iot)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-iot

- name: cv-iot
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-iot
    - name: product_channel
      value: $(params.mas_app_channel_iot)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_iot)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-iot


# IVT 3: Core x Manage
# -------------------------------------------------------------------------
- name: ivtcore-manage
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-manage
    - name: product_channel
      value: $(params.mas_app_channel_manage)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_manage)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-manage

- name: cv-manage
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-manage
    - name: product_channel
      value: $(params.mas_app_channel_manage)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_manage)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-manage


# IVT 4: Core x Monitor
# -------------------------------------------------------------------------
- name: ivtcore-monitor
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-monitor
    - name: product_channel
      value: $(params.mas_app_channel_monitor)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_monitor)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-monitor

- name: cv-monitor
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-monitor
    - name: product_channel
      value: $(params.mas_app_channel_monitor)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_monitor)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-monitor


# IVT 5: Core x Optimizer
# -------------------------------------------------------------------------
- name: ivtcore-optimizer
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-optimizer
    - name: product_channel
      value: $(params.mas_app_channel_optimizer)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_optimizer)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-optimizer

- name: cv-optimizer
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-optimizer
    - name: product_channel
      value: $(params.mas_app_channel_optimizer)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_optimizer)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-optimizer


# IVT 6: Core x Predict
# -------------------------------------------------------------------------
- name: ivtcore-predict
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-predict
    - name: product_channel
      value: $(params.mas_app_channel_predict)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_predict)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-predict

- name: cv-predict
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-predict
    - name: product_channel
      value: $(params.mas_app_channel_predict)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_predict)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-predict


# IVT 7: Core x Visual Inspection
# -------------------------------------------------------------------------
- name: ivtcore-visualinspection
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-visualinspection
    - name: product_channel
      value: $(params.mas_app_channel_visualinspection)
    - name: test_suite
      value: coreivt
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_visualinspection)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-visualinspection

- name: cv-visualinspection
  {{ lookup('template', 'taskdefs/ivt-core/common/taskref.yml.j2') | indent(2) }}
  params:
    {{ lookup('template', 'taskdefs/ivt-core/common/params.yml.j2') | indent(4) }}
    - name: product_id
      value: ibm-mas-visualinspection
    - name: product_channel
      value: $(params.mas_app_channel_visualinspection)
    - name: test_suite
      value: contentverification
  when:
    - input: "$(params.ivt_digest_core)"
      operator: notin
      values: [""]
    - input: "$(params.mas_app_channel_visualinspection)"
      operator: notin
      values: [""]
  runAfter:
    - app-cfg-visualinspection
