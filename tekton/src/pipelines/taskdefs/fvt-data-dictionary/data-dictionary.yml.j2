
# We are running this test first since it happens to set the Suite accessTokenTimeout from the default of 30m to 12h
# This prevents subsequent test suites that take >30 mins from hitting unexpected 401s due to tokens generated by
# session-scoped fixtures expiring before the tests complete.
# This is temporary workaround, the proper fix is to make the accessTokenTimeout field configurable during install

# ADD FVT 1.1 operatormaturity ~20m
- name: fvt-data-dictionary-operatormaturity
  timeout: "0"
  taskRef:
    kind: Task
    name: mas-fvt-data-dictionary
  when:
    - input: "$(params.fvt_digest_data_dictionary)"
      operator: notin
      values: [""]
  workspaces:
    - name: configs
      workspace: shared-configs
    - name: pod-templates
      workspace: shared-pod-templates
  params:
    - name: mas_instance_id
      value: $(params.mas_instance_id)
    - name: fvt_image_registry
      value: $(params.fvt_image_registry)
    - name: fvt_image_digest
      value: $(params.fvt_digest_data_dictionary)
    - name: fvt_test_suite
      value: operatormaturity
